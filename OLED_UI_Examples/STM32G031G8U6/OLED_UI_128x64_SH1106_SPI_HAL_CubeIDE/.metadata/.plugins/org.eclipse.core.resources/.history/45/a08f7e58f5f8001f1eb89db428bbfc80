/*
 * misc.h
 *
 *  Created on: Nov 24, 2024
 *      Author: tonny
 */

#ifndef MISC_H_
#define MISC_H_

#include "main.h"

#define BTN_LONG_PRESS_MS 1000
#define BTN_DEBOUNCE_MS 50	//消抖时间ms
#define STICK_DEAD_ZONE 10  //摇杆死区: -10g~10g
#define STICK_MAX_VALUE 200 //摇杆最大值
#define STICK_ACTIVE_VALUE ((STICK_MAX_VALUE + STICK_DEAD_ZONE) / 2) //摇杆激活值

struct BTN_stat_t{
	uint8_t isPressing;			//按钮状态
	uint8_t isDebouncedPressing;//消抖后的状态
	uint8_t isLongPressing;		//是否正在长按
	uint8_t pressEvent;			//未处理的按下事件
	uint8_t longPressEvent;		//未处理的长按事件
	uint32_t pressStartTick;	//按下瞬间的时间
	uint32_t pressEndTick;		//松开瞬间的时间
};


void Misc_init();
// 任务包括：电池等
void MiscTask(void *argv, unsigned short int argc);


void BTN_init();

void BtnTask();

void goToSleep();

#endif /* MISC_H_ */
